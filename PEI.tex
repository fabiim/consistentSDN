%
% Modelo para relat￳rio da disciplina de Projecto de Engenharia Informatica
% do MEI.
%
% Incorpora elementos impostos pelo Regulamento de Estudos Pos-Graduados da
% Universidade de Lisboa (Deliberacao 1506/2006 - Diario da Rep￺blica, 2.a s￩rie 
% - n.o 209 - 30 de Outubro de 2006)
%
\documentclass[12pt,openright,twoside]{report}
\usepackage[show]{chato-notes}
\usepackage[utf8]{inputenc}
% Quem tiver problemas com os acentos, trocar utf8 por latin1

%\usepackage{setspace}
\usepackage[portuguese,english]{babel}

\usepackage{times}
\usepackage[hyphens]{url}
%\usepackage{url}
\usepackage{graphicx}
\usepackage{mdwlist}
\usepackage[nottoc]{tocbibind}
\usepackage{csquotes}
\usepackage{listings}
\usepackage[table,hyperref,x11names]{xcolor}
\usepackage{array,booktabs}
\usepackage{multirow}
\usepackage{mathrsfs}
\usepackage{dialogue}
%To get figures and tables side by side
\usepackage{floatrow}
\newfloatcommand{capbtabbox}{table}[][\FBwidth]
% end figures and tables side by side



%%%%%%%%%%%%%%%%%%%%%%%
%title 
\makeatletter
\renewcommand{\@makechapterhead}[1]{%
\vspace*{50 pt}%
{\setlength{\parindent}{0pt} \raggedright \normalfont
\bfseries\Huge
\ifnum \value{secnumdepth}>1 
   \if@mainmatter Chapter \thechapter\ --\ \fi%
\fi
#1\par\nobreak\vspace{40 pt}}}
\makeatother


%%%%%%%%%%%%%%%%%%%%%%%%%%
%footnote in tables 
\usepackage{threeparttable}
%end footnote in tables

% Indice remissivo
\usepackage{makeidx}
\makeindex

%%%%%%%%%%%%%%%%%% BIG O 
\usepackage{amsmath}
\newcommand{\BigO}[1]{\ensuremath{\operatorname{O}\bigl(#1\bigr)}}
%%%%%%%%%%%%%% BIG O
%quotes
\usepackage{epigraph}
\usepackage{attrib}
\usepackage{titlesec}
\usepackage{ amssymb }

%\titlespacing{\subsubsection}{0pt}{0pt}{0pt}
%\titleformat{\subsubsection}[runin]{\normalfont\bfseries}{\thesubsection.}{3pt}{}


\usepackage[nomain,acronym,xindy,nonumberlist]{glossaries}
\usepackage{glossary-mcols}  
\renewcommand*{\glsmcols}{3}  
\glossarystyle{mcolindex}
\include{./tex/acronimos}
\makeglossary  

% Links
\usepackage{hyperref}

% Package para cabecalhos
\usepackage{fancyhdr}
\usepackage{lastpage}

\usepackage[font={small}]{caption}
\usepackage{subcaption}
\usepackage[style=numeric-comp, sorting=none,  isbn=false,
url=false, doi=false, eprint=false,backref=true]{biblatex}

%%%%%%%%%%%
\newbibmacro*{bbx:parunit}{%
  \ifbibliography
    {\setunit{\bibpagerefpunct}\newblock
     \usebibmacro{pageref}%
     \clearlist{pageref}%
     \setunit{\adddot\par\nobreak}}
    {}}

\renewbibmacro*{doi+eprint+url}{%
  \usebibmacro{bbx:parunit}% Added
  \iftoggle{bbx:doi}
    {\printfield{doi}}
    {}%
  \iftoggle{bbx:eprint}
    {\usebibmacro{eprint}}
    {}%
  \iftoggle{bbx:url}
    {\usebibmacro{url+urldate}}
    {}}

\renewbibmacro*{eprint}{%
  \usebibmacro{bbx:parunit}% Added
  \iffieldundef{eprinttype}
    {\printfield{eprint}}
    {\printfield[eprint:\strfield{eprinttype}]{eprint}}}

\renewbibmacro*{url+urldate}{%
  \usebibmacro{bbx:parunit}% Added
  \printfield{url}%
  \iffieldundef{urlyear}
    {}
    {\setunit*{\addspace}%
     \printtext[urldate]{\printurldate}}}

%%%%%%%%%%%%%
\bibliography{bibliografia}
\fancyhf{} %
\lhead{\nouppercase {\leftmark}} %
\rhead{\nouppercase {\bf \thepage}}
\renewcommand{\headrulewidth}{0.1pt}
%%%%%%%%%%%
\usepackage{titletoc}

%%%%%%%%%
%%%%
%colouring tables
\usepackage{color, colortbl}
\definecolor{Gray}{gray}{0.9}
\definecolor{LightCyan}{rgb}{0.88,1,1}
%%%%%%%%

%%%%%%%%%%%

\hyphenation{protocol}

\newcommand{\etal}{et al.}

%%%%%%%%%%%%%%%%%%%%


% Comando para inserir pagina em branco (inserida na numeracao, mas sem
% numero impresso) para quando e' preciso obrigar um capitulo a comecar
% do lado direito (pagina impar)
\newcommand{\LIMPA}{
\newpage
\mbox{}
\thispagestyle{empty}
}

% Igual, mas insere pagina com numero impresso (normalmente nao se usa)
\newcommand{\LIMPAC}{
\newpage
\mbox{}
\thispagestyle{plain}
}

%%%%%%%%%
% \renewcommand{\epigraphrule}{0pt}
\setlength{\epigraphwidth}{0.6\textwidth}
% \renewcommand{\textflush}{flushepinormal}
% \makeatletter
% % Taken and updated from http://mirrors.ctan.org/macros/latex/contrib/epigraph/epigraph.dtx
% \renewcommand{\@epitext}[1]{%
%   \begin{minipage}{\epigraphwidth}\begin{\textflush} \hspace*{20pt}\emph{#1}\\
%     \ifdim\epigraphrule>\z@ \@epirule \else \vspace*{-.5\baselineskip} \fi
%   \end{\textflush}\end{minipage}}
% \makeatother
%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%
%%%%%%% PERSONAL COMMANDS %%%%%%%%%%%
\newcommand{\distcontrollers}{\cite{Tootoonchian:2010vy,Koponen:2010th,Yeganeh:2012jm,jain2013b4}}
\newcommand{\distcontrollerspaper}{\cite{Tootoonchian:2010vy, Koponen:2010th,Yeganeh:2012jm}}
%END 

\newcommand{\tbl}[2]{\begin{tabular}{#1}#2\end{tabular}}
\newcommand{\ml}[2]{#1 $\pm$ #2} 

%
% ALTERAR AQUI AS INFORMACOES RELATIVAS AO PROJECTO
%
\newcommand{\PEITITULO}{A Consistent and Fault-Tolerant Data Store for Software Defined Networks}
\newcommand{\PEIAutor}{Fábio Andrade Botelho}
\newcommand{\PEIAutorNumAluno}{41625}

%Orientador e CoOrientador *sem* titulos (e.g. Prof. Doutor)
\newcommand{\PEIOrientador}{Alysson Neves Bessani}
\newcommand{\PEICoOrientador}{Fernando Manuel Valente Ramos} %se nao se aplicar, nao importa o que aqui esteja

%Se aplicavel, o supervisor pode ter um titulo (Dr., Eng.) colocado aqui
\newcommand{\PEISupervisorInstituicao}{Nome Completo do Supervisor}  %se nao se aplicar, nao importa o que aqui esteja

\newcommand{\PEIAnoLectivo}{2012/2013}
\newcommand{\PEIAno}{2013}

% Comentar/descomentar conforme conveniente
\newcommand{\PEITIPO}{DISSERTA\c{C}\~{A}O }
%\newcommand{\PEITIPO}{PROJECTO }

% Comentar/descomentar conforme conveniente
%\newcommand{\PEIIdiomaTese}{\selectlanguage{portuguese}}
\newcommand{\PEIIdiomaTese}{\selectlanguage{english}}

% Comentar/descomentar conforme conveniente
%\newcommand{\MEIEspecializacao}{Segurança Informática}
%\newcommand{\MEIEspecializacao}{Arquitectura, Sistemas e Redes de Computadores}
%\newcommand{\MEIEspecializacao}{Interac��o e Conhecimento}
%\newcommand{\MEIEspecializacao}{Engenharia de Software }

\usepackage{ifpdf}
\ifpdf
\pdfinfo {
	/Author (\PEIAutor)
	/Title (Projecto em Segurança Informatica)
	/Subject (Segurança Informatica)
	/Keywords (state machine replication, software defined networks)
	/CreationDate (D:20100510104905)
}
\fi

\usepackage[dvips]{geometry}
\geometry{a4paper=true,portrait=true,left=3cm,right=3cm,top=2.5cm,bottom=3.5cm}

\title{\PEITITULO}
\author{\PEIAutor}
%\date{\today}

\begin{document}

%\doublespacing

%Capa e pagina de rosto
\include{./tex/capa}

% Agradecimentos
\include{./tex/agradecimentos}

% Pagina do resumo em portugues
\include{./tex/resumo_pt}

% Pagina do resumo em ingles
\include{./tex/resumo_ing}

\pagestyle{plain}

\PEIIdiomaTese

% Indice
\tableofcontents

\LIMPA

%Lista de figuras
\listoffigures

%\addcontentsline {toc} {chapter} {Lista de Figuras}
\newpage
\thispagestyle{empty}
\mbox{}
\newpage

%Lista de tabelas
\listoftables

%\addcontentsline {toc} {chapter} {Lista de Tabelas}
\newpage
\thispagestyle{empty} \mbox{}
\newpage


% ----------------------------------------------------------------------
% Inicio conteudo
\pagestyle{fancy}
\cleardoublepage

\setcounter{page}{1}
\pagenumbering{arabic}

%Footnotes penalty for not spliting across pages. 
\interfootnotelinepenalty=10000



\begingroup
\renewcommand{\cleardoublepage}{}
\renewcommand{\clearpage}{}
\chapter{Introduction}\label{chapter:1}
\endgroup

\glsresetall
\setlength{\epigraphwidth}{0.4\textwidth}
\epigraph{ \emph{The nice thing about standards is that you have so
    many to choose from.}}{Andrew S. Tanenbaum} 
% contexto do trabalho
% se resume o trabalho desenvolvido
% se identificam  contribuicoes 
% estrutura do relatorio 
% sucintamente o enquadramento instituicional 

%Outro capitulo? 
% pormenor os objectivos do trabalho
% contexto subjacente 
% metodologia  utilizado no desenvolvimento como o planeamento efectuado para o concretizar 
% Apresentar uma confrontacao com o plano de trabalho inicial  analisando as razoes de eventuais desvios occorridos

\input{./tex/intro}

\LIMPA

%\renewcommand{\cleardoublepage}{}
%\renewcommand{\clearpage}{}
\begingroup
\renewcommand{\cleardoublepage}{}
\renewcommand{\clearpage}{}
\chapter{Related Work}\label{chapter:2}
\endgroup
\setlength{\epigraphwidth}{0.4\textwidth}
\epigraph{\emph{If the only tool you have is a hammer, you treat everything like a nail.}}{Abraham Maslow}
%\epigraph{Uma pessoa chega a qualquer algoritmo que encontra por aí. Pega, corta, abre, olha, vê.... É um Hilo! Tudo é um Hilomorfismo!}{Professor de LEI - 2º ano}
\glsresetall
\input{./tex/relatedwork2}

\LIMPA
\begingroup
\renewcommand{\cleardoublepage}{}
\renewcommand{\clearpage}{}
\chapter{Architecture}\label{chapter:3}
\endgroup
\epigraph{\emph{All problems in computer science can be solved by another level of indirection...except for the problem of too many layers of indirection.}}{Kevlin Henney's}
%\epigraph{Estamos no Mato...  E sem cão!}{Professor de LEI - 3º ano}
\glsresetall
\input{./tex/design}

\LIMPA
\begingroup
\renewcommand{\cleardoublepage}{}
\renewcommand{\clearpage}{}
\chapter{Evaluation}\label{chapter:4}
\setlength{\epigraphwidth}{0.6\textwidth}
\epigraph{\emph{There are only two hard things in Computer Science:
    cache invalidation, naming things and off-by-one
    errors.}}{Variation of Phil Karlton quote}
\endgroup
%\setlength{\epigraphwidth}{.6\textwidth}
%\epigraph{Eu já estou por tudo. Por mim reinicio o TomCat.}{MSI - Estudante do 1º ano}
%\epigraph{}{}
%%%% quote 

%%%%

\glsresetall
\input{./tex/feasibility} 

\LIMPA
\begingroup
\renewcommand{\cleardoublepage}{}
\renewcommand{\clearpage}{}
\chapter{Conclusions}\label{chapter:5}
\endgroup
\setlength{\epigraphwidth}{0.25\textwidth}
\epigraph{\emph{The Free Lunch Is Over.}}{Herb Sutter.}

%\epigraph{São trade-offs Professor, são trade-offs...}{MSI - José Sá Lopes}
\glsresetall
% sumario de trabalho realizado

% comentario critico
% possibility of future work 

\input{./tex/conclusion}
\LIMPA

% Inicio apendices
%\appendix

%\include{./tex/apendices}



% Fim do conteudo
% ----------------------------------------------------------------------

% Glossario

\LIMPA

%
% Para actualizar o glossario, e' preciso correr o script ./fazindice
% e voltar a gerar o PDF
%
%\include{./tex/acronimos}
\renewcommand{\glossaryname}{Glossary}
%\setglossary{glodelim={\noexpand}}
%\setglossary{glsnumformat=ignore}



\addcontentsline {toc} {chapter} {Glossary}

\printglossary[type=acronym,title=Glossary]
\printindex


% Bibliografia

% \LIMPA

\printbibliography[title=References,heading=bibintoc]

% Indice remissivo
\LIMPA
%\printindex
%\addcontentsline {toc} {chapter} {Table Of Contents}

\end{document}
